<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                template="./Template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                >

 
    <ui:define name="content">
       
        
        <h:form id='formListagem'>

            <p:panel header='tabela'>
                <p:dataTable id='tabela'  emptyMessage="Nenhum registro encontrado." paginator="true" value="#{animalController.animais}"
                             var='animal' rows="5">

                    <f:facet name="header">
                        <p:commandButton value="novo" oncomplete="PF('dialogo').show();" ></p:commandButton>     
                    </f:facet> 

                    <p:column headerText="Codigo" filterBy="#{animal.codAnimal}"
                              sortBy="#{animal.codAnimal}" >
                        <h:outputText value="#{animal.codAnimal}"  ></h:outputText>
                    </p:column>

                    <p:column headerText="Nome do Animal" filterBy="#{animal.nomeAni}"
                              sortBy="#{animal.nomeAni}">
                        <h:outputText value="#{animal.nomeAni}"  ></h:outputText>
                    </p:column>

                    <p:column headerText="Idade" filterBy="#{animal.idade}"
                              sortBy="#{animal.idade}">
                        <h:outputText value="#{animal.idade}"  ></h:outputText>
                    </p:column>

                    <p:column headerText="Raça" filterBy="#{animal.raça}"
                              sortBy="#{animal.raça}">
                        <h:outputText value="#{animal.raça}"  ></h:outputText>
                    </p:column>

                    <p:column headerText="Porte" filterBy="#{animal.porte}"
                              sortBy="#{animal.porte}">
                        <h:outputText value="#{animal.porte}"  ></h:outputText>
                    </p:column>

                    <p:column headerText="Tipo" filterBy="#{animal.tipo}"
                              sortBy="#{animal.tipo}">
                        <h:outputText value="#{animal.tipo}"  ></h:outputText>
                    </p:column>

                    <p:column headerText="Opções" >
                        <p:commandButton  icon="ui-icon-trash" 
                                          actionListener="#{animalController.removerAnimal()}"
                                          update=':mensagem :formListagem: tabela'>
                            <p:confirm header="Confirmação"  message="Deseja realmente excluir"   
                                       icon="ui-icon-alert" />
                            <f:attribute name="selectedAnimal" value="#{animal}"/>
                        </p:commandButton>     


                        <p:commandButton icon="ui-icon-pencil"
                                         actionListener="#{animalController.alterarAnimal()}"
                                         update=':formListagem:tabela' 
                                         oncomplete="PF('dialogo').show();">
                            <f:attribute name="animalSelecionado" value='#{animal}'/>
                        </p:commandButton> 

                    </p:column> 
                </p:dataTable>

                <p:confirmDialog global ="true">
                    <p:commandButton value="Sim" type="button"
                                     styleClass="ui-confimdialog-yes" icon="ui-icon-check"/>
                    <p:commandButton value ="Não" type="button"
                                     styleClass="ui-confimdialog-no" icon="ui-icon-close"/>
                </p:confirmDialog>

            </p:panel>

        </h:form>
  
    </ui:define>
 
</ui:composition>




